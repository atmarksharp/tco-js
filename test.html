<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>tco.js test</title>
  <script src="http://code.jquery.com/jquery-1.12.0.js"></script>
  <script src="tco.js"></script>
  <script>
  // Note: only for testing, bad algorithm
  function sum(n, acc){
    acc = acc || 0;
    if(n == 0)
      return acc;
    else
      return TCO.tail_call(n-1, acc+n);
  }

  var sumOpt = TCO.optimize(sum); // Tail-call Optimization

  // var ret = sum(1000000); // Maximum call stack size exceeded
  var ret = sumOpt(1000000); // 500000500000

  console.log(ret);

  jQuery(function(){
    $('#result').html("sum = " + ret);
  });

  </script>
</head>
<body>
  <h2>Result</h2>
  <p id="result">計算中...</p>
</body>
</html>
